!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.steemRPC=e()}}(function(){var e;return function t(e,n,o){function i(c,s){if(!n[c]){if(!e[c]){var a="function"==typeof require&&require;if(!s&&a)return a(c,!0);if(r)return r(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){var n=e[c][1][t];return i(n?n:t)},l,l.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<o.length;c++)i(o[c]);return i}({1:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=e("./WebSocketRpc"),s=e("./SteemApi"),a={url:"wss://steemit.com/ws",user:"",pass:"",debug:!1},u=function(){function e(t){o(this,e),this.options=Object.assign({},a,t)}return r(e,[{key:"connect",value:function(){var e=this;this.wsRpc||(this.options.debug&&console.log("connect options:",this.options),this.wsRpc=new c(this.options.url),this.initPromise=this.wsRpc.login(this.options.user,this.options.pass).then(function(){e._db_api=new s(e.wsRpc,"database_api");var t=e._db_api.init().then(function(){return"connected to db_api"});return Promise.all([t])}))}},{key:"dbApi",value:function(){return this._db_api}}]),e}(),l=function(){function e(t){o(this,e),this.options=t}return r(e,[{key:"get",value:function(){return i||(i=new u(this.options),i.connect()),i}}]),e}();t.exports=l},{"./SteemApi":2,"./WebSocketRpc":3}],2:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t,n){o(this,e),this.wsRpc=t,this.apiName=n}return i(e,[{key:"init",value:function(){var e=this;return this.wsRpc.getApiByName(this.apiName).then(function(t){return e.apiId=t,e})}},{key:"exec",value:function(e,t){return this.wsRpc.call([this.apiId,e,t])["catch"](function(n){throw console.error("SteemApi error:",e,t,JSON.stringify(n)),new Error("SteemApi error:"+e+t+JSON.stringify(n))})}}]),e}();t.exports=r},{}],3:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function t(n){var i=this;o(this,t);var r="undefined"!=typeof WebSocket?e("ReconnectingWebSocket"):e("websocket").w3cwebsocket;try{this.ws=new r(n)}catch(c){console.error("ws error:",c)}this.ws.timeoutInterval=15e3,this.connectPromise=new Promise(function(e,t){i.ws.onopen=function(){e()},i.ws.onerror=function(e){t(e)},i.ws.onmessage=function(e){i.listener(JSON.parse(e.data))}}),this.currentCallbackId=0,this.callbacks=new Map}return i(t,[{key:"listener",value:function(e){var t=this.callbacks.get(e.id);t&&("error"in e?t.reject(e.error):t.resolve(e.result))}},{key:"call",value:function(e){var t=this,n={method:"call",params:e,id:this.currentCallbackId++};return new Promise(function(e,o){t.callbacks.set(n.id,{time:new Date,resolve:e,reject:o}),t.ws.onerror=function(e){console.error("!!! WebSocket Error ",e),o(e)},t.ws.send(JSON.stringify(n))})}},{key:"getApiByName",value:function(e){return this.call([1,"get_api_by_name",[e]])}},{key:"login",value:function(e,t){var n=this;return this.connectPromise.then(function(){return n.call([1,"login",[e,t]])})}},{key:"close",value:function(){this.ws.close()}}]),t}();t.exports=r},{ReconnectingWebSocket:5,websocket:6}],4:[function(e,t,n){"use strict";var o=e("./ApiInstance");t.exports=function(e){return new o(e||{})}},{"./ApiInstance":1}],5:[function(t,n,o){!function(t,o){"function"==typeof e&&e.amd?e([],o):"undefined"!=typeof n&&n.exports?n.exports=o():t.ReconnectingWebSocket=o()}(this,function(){function e(t,n,o){function i(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}var r={debug:!1,automaticOpen:!0,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3,maxReconnectAttempts:null,binaryType:"blob"};o||(o={});for(var c in r)"undefined"!=typeof o[c]?this[c]=o[c]:this[c]=r[c];this.url=t,this.reconnectAttempts=0,this.readyState=WebSocket.CONNECTING,this.protocol=null;var s,a=this,u=!1,l=!1,p=document.createElement("div");p.addEventListener("open",function(e){a.onopen(e)}),p.addEventListener("close",function(e){a.onclose(e)}),p.addEventListener("connecting",function(e){a.onconnecting(e)}),p.addEventListener("message",function(e){a.onmessage(e)}),p.addEventListener("error",function(e){a.onerror(e)}),this.addEventListener=p.addEventListener.bind(p),this.removeEventListener=p.removeEventListener.bind(p),this.dispatchEvent=p.dispatchEvent.bind(p),this.open=function(t){if(s=new WebSocket(a.url,n||[]),s.binaryType=this.binaryType,t){if(this.maxReconnectAttempts&&this.reconnectAttempts>this.maxReconnectAttempts)return}else p.dispatchEvent(i("connecting")),this.reconnectAttempts=0;(a.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","attempt-connect",a.url);var o=s,r=setTimeout(function(){(a.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","connection-timeout",a.url),l=!0,o.close(),l=!1},a.timeoutInterval);s.onopen=function(n){clearTimeout(r),(a.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onopen",a.url),a.protocol=s.protocol,a.readyState=WebSocket.OPEN,a.reconnectAttempts=0;var o=i("open");o.isReconnect=t,t=!1,p.dispatchEvent(o)},s.onclose=function(n){if(clearTimeout(r),s=null,u)a.readyState=WebSocket.CLOSED,p.dispatchEvent(i("close"));else{a.readyState=WebSocket.CONNECTING;var o=i("connecting");o.code=n.code,o.reason=n.reason,o.wasClean=n.wasClean,p.dispatchEvent(o),t||l||((a.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onclose",a.url),p.dispatchEvent(i("close")));var r=a.reconnectInterval*Math.pow(a.reconnectDecay,a.reconnectAttempts);setTimeout(function(){a.reconnectAttempts++,a.open(!0)},r>a.maxReconnectInterval?a.maxReconnectInterval:r)}},s.onmessage=function(t){(a.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onmessage",a.url,t.data);var n=i("message");n.data=t.data,p.dispatchEvent(n)},s.onerror=function(t){(a.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","onerror",a.url,t),p.dispatchEvent(i("error"))}},1==this.automaticOpen&&this.open(!1),this.send=function(t){if(s)return(a.debug||e.debugAll)&&console.debug("ReconnectingWebSocket","send",a.url,t),s.send(t);throw"INVALID_STATE_ERR : Pausing to reconnect websocket"},this.close=function(e,t){"undefined"==typeof e&&(e=1e3),u=!0,s&&s.close(e,t)},this.refresh=function(){s&&s.close()}}if("WebSocket"in window)return e.prototype.onopen=function(e){},e.prototype.onclose=function(e){},e.prototype.onconnecting=function(e){},e.prototype.onmessage=function(e){},e.prototype.onerror=function(e){},e.debugAll=!1,e.CONNECTING=WebSocket.CONNECTING,e.OPEN=WebSocket.OPEN,e.CLOSING=WebSocket.CLOSING,e.CLOSED=WebSocket.CLOSED,e})},{}],6:[function(e,t,n){function o(e,t){var n;return n=t?new r(e,t):new r(e)}var i=function(){return this}(),r=i.WebSocket||i.MozWebSocket,c=e("./version");t.exports={w3cwebsocket:r?o:null,version:c}},{"./version":7}],7:[function(e,t,n){t.exports=e("../package.json").version},{"../package.json":8}],8:[function(e,t,n){t.exports={_args:[["websocket@^1.0.23","/home/sigve/Dev/Steem/steem-rpc"]],_from:"websocket@>=1.0.23 <2.0.0",_id:"websocket@1.0.23",_inCache:!0,_installable:!0,_location:"/websocket",_nodeVersion:"0.10.45",_npmOperationalInternal:{host:"packages-16-east.internal.npmjs.com",tmp:"tmp/websocket-1.0.23.tgz_1463625793005_0.4532310354989022"},_npmUser:{email:"brian@worlize.com",name:"theturtle32"},_npmVersion:"2.15.1",_phantomChildren:{},_requested:{name:"websocket",raw:"websocket@^1.0.23",rawSpec:"^1.0.23",scope:null,spec:">=1.0.23 <2.0.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.23.tgz",_shasum:"20de8ec4a7126b09465578cd5dbb29a9c296aac6",_shrinkwrap:null,_spec:"websocket@^1.0.23",_where:"/home/sigve/Dev/Steem/steem-rpc",author:{email:"brian@worlize.com",name:"Brian McKelvey",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{email:"ibc@aliax.net",name:"IÃ±aki Baz Castillo",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.4"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^0.0.1",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^1.11.2","jshint-stylish":"^1.0.2",tape:"^4.0.1"},directories:{lib:"./lib"},dist:{shasum:"20de8ec4a7126b09465578cd5dbb29a9c296aac6",tarball:"https://registry.npmjs.org/websocket/-/websocket-1.0.23.tgz"},engines:{node:">=0.8.0"},gitHead:"ba2fa7e9676c456bcfb12ad160655319af66faed",homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",maintainers:[{email:"brian@worlize.com",name:"theturtle32"}],name:"websocket",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.23"}},{}]},{},[4])(4)});